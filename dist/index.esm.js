import e,{useState as t,useCallback as n,useEffect as r}from"react";import{jsx as l,jsxs as i,Fragment as o}from"react/jsx-runtime";function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){c(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,l,i,o,a=[],c=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t);else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);c=!0);}catch(e){s=!0,l=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw l}}return a}}(e,t)||m(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||m(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function m(e,t){if(e){if("string"==typeof e)return a(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}var y=function(){return{Container:"div",Box:"div",Button:"button",Input:"input",Select:"select",Textarea:"textarea",Table:"table",Thead:"thead",Tbody:"tbody",Tr:"tr",Th:"th",Td:"td",Text:"span",Heading:"h2",Stack:"div",HStack:"div",VStack:"div",Card:"div",Alert:"div",Badge:"span",Grid:"div",GridItem:"div",Flex:"div",Label:"label"}},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"chakra",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default";if("chakra"===e)return"";var r={tailwind:{Container:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",Box:"block",Button:{default:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",secondary:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},Input:{default:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",checkbox:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},Select:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",Textarea:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm resize-vertical",Table:"min-w-full divide-y divide-gray-200",Thead:"bg-gray-50",Tbody:"bg-white divide-y divide-gray-200",Tr:"hover:bg-gray-50",Th:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",Td:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",Text:"text-gray-900",Heading:"text-2xl font-bold text-gray-900 mb-4",Stack:"space-y-4",HStack:"flex space-x-4 items-center",VStack:"flex flex-col space-y-4",Card:"bg-white overflow-hidden shadow rounded-lg p-6",Alert:{error:"bg-red-50 border border-red-200 rounded-md p-4 text-red-800",success:"bg-green-50 border border-green-200 rounded-md p-4 text-green-800",warning:"bg-yellow-50 border border-yellow-200 rounded-md p-4 text-yellow-800",info:"bg-blue-50 border border-blue-200 rounded-md p-4 text-blue-800"},Badge:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",Grid:"grid",GridItem:"",Flex:"flex",Label:"block text-sm font-medium text-gray-700"},shadcn:{Container:"container mx-auto px-4",Box:"block",Button:{default:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2",secondary:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-secondary text-secondary-foreground hover:bg-secondary/80 h-10 px-4 py-2"},Input:{default:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",checkbox:"h-4 w-4 rounded border border-primary text-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},Select:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",Textarea:"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",Table:"w-full caption-bottom text-sm",Thead:"[&_tr]:border-b",Tbody:"[&_tr:last-child]:border-0",Tr:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",Th:"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",Td:"p-4 align-middle [&:has([role=checkbox])]:pr-0",Text:"text-sm text-muted-foreground",Heading:"scroll-m-20 text-2xl font-semibold tracking-tight",Stack:"flex flex-col space-y-4",HStack:"flex space-x-4",VStack:"flex flex-col space-y-4",Card:"rounded-lg border bg-card text-card-foreground shadow-sm",Alert:{error:"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive",success:"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",warning:"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",info:"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground"},Badge:"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",Grid:"grid",GridItem:"",Flex:"flex",Label:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"}}[e];if(!r||!r[t])return"";var l=r[t];return"object"===p(l)?l[n]||l.default||"":l},b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var l=t?"".concat(t,".").concat(r):r;"object"!==p(e[r])||null===e[r]||Array.isArray(e[r])?n[l]=e[r]:Object.assign(n,b(e[r],l))}return n},x=function(e){var t={};for(var n in e){for(var r=n.split("."),l=t,i=0;i<r.length-1;i++)l[r[i]]||(l[r[i]]={}),l=l[r[i]];l[r[r.length-1]]=e[n]}return t},h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(n[t])return u({type:n[t].type},n[t]);if("boolean"==typeof e)return{type:"checkbox"};if("number"==typeof e)return{type:"number"};if(Array.isArray(e))return{type:"array",items:e};if("object"===p(e)&&null!==e)return{type:"object"};if("string"==typeof e){if(e.length>100)return{type:"textarea",rows:4};if(e.includes("@")||t.toLowerCase().includes("email"))return{type:"email"};if(e.startsWith("http")||t.toLowerCase().includes("url"))return{type:"url"};if(e.match(/^\d{4}-\d{2}-\d{2}$/)||t.toLowerCase().includes("date"))return{type:"date"};if(t.toLowerCase().includes("password"))return{type:"password"}}return{type:"text"}},v=function(e){try{return{success:!0,data:JSON.parse(e)}}catch(e){return{success:!1,error:e.message}}},B=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return JSON.stringify(e,null,t)},k=function(e){return e.split(".").length-1},T=function(e){return e.split(".").pop().replace(/([A-Z])/g," $1").replace(/[_-]/g," ").replace(/\b\w/g,function(e){return e.toUpperCase()}).trim()},S=["_classNames","styles","renderers","customFieldRenderers","customInputRenderers","customControlRenderers","customLabelRenderers","uiLibrary","onSave","onCancel","onFieldChange","saveButtonText","cancelButtonText","initialJson","customStyles","showControls","inlineLabels","columns","fieldConfig","sections","includeUnsectioned","unsectionedTitle"],w=function(a){a._classNames,a.styles;var s=a.renderers,m=void 0===s?{}:s,y=a.customFieldRenderers,B=void 0===y?{}:y,k=a.customInputRenderers,w=void 0===k?{}:k,C=a.customControlRenderers,N=void 0===C?{}:C,L=a.customLabelRenderers,I=void 0===L?{}:L,O=a.uiLibrary,A=void 0===O?"chakra":O,j=a.onSave,H=a.onCancel,D=a.onFieldChange,W=a.saveButtonText,z=void 0===W?"Save Changes":W,V=a.cancelButtonText,P=void 0===V?"Reset Form":V,F=a.initialJson,R=void 0===F?"":F,E=a.customStyles,U=void 0===E?{}:E,J=a.showControls,G=void 0===J||J,M=a.inlineLabels,_=void 0!==M&&M,$=a.columns,K=void 0===$?2:$,Z=a.fieldConfig,q=void 0===Z?{}:Z,Q=a.sections,X=void 0===Q?null:Q,Y=a.includeUnsectioned,ee=void 0!==Y&&Y,te=a.unsectionedTitle,ne=void 0===te?"Other":te,re=function(e,t){if(null==e)return{};var n,r,l=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}(a,S),le=d(t(R),2),ie=le[0],oe=le[1],ae=d(t({}),2),ce=ae[0],se=ae[1],ue=d(t({}),2),de=ue[0],fe=ue[1],pe=d(t(null),2)[1],me=d(t(""),2),ye=me[0],ge=me[1],be=d(t({}),2),xe=be[0],he=be[1],ve=d(t(function(){return new Set}),2),Be=ve[0],ke=ve[1],Te={Container:m.Container||"div",Box:m.Box||"div",Button:m.Button||"button",Input:m.Input||"input",Select:m.Select||"select",Textarea:m.Textarea||"textarea",Text:m.Text||"span",Heading:m.Heading||"h2",VStack:m.VStack||"div",HStack:m.HStack||"div",Card:m.Card||"div",Alert:m.Alert||"div",Label:m.Label||"label"},Se=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=Array.isArray(t),a=!o&&"object"===p(t)&&null!==t,s=o?t:a?Object.entries(t).map(function(e){var t=d(e,2);return{key:t[0],value:t[1]}}):[],m=[];if(s.length){var y=new Set;s.forEach(function(e){return Object.keys(e||{}).forEach(function(e){return y.add(e)})}),m=Array.from(y)}else m=Array.isArray(r.columns)?r.columns:["key","value"];var g=function(t){if(o)Le(e,t);else if(a){var n={};t.forEach(function(e){var t,r,l=null!==(t=e.key)&&void 0!==t?t:e.name,i=null!==(r=e.value)&&void 0!==r?r:e.val;void 0!==l&&""!==l&&(n[l]=i)}),Le(e,n)}else Le(e,t)},b={display:"grid",gridTemplateColumns:"".concat("1fr ".repeat(m.length),"auto").trim(),gap:"0.5rem",alignItems:"center",padding:"3px 0px"},x=Ce(e,r),h=x.description,v=x.placement,B=h?l(Te.Text,{className:we(A,"Text"),style:{fontSize:"12px",opacity:.8,marginBottom:"0.5rem"},children:h}):null;return i(Te.Box,{className:we(A,"Box"),style:u({marginBottom:"1rem"},U.fieldContainer),children:[l(Te.Label,{className:we(A,"Label"),style:u({display:"block",fontWeight:"600",marginBottom:"0.5rem"},U.fieldLabel),children:n}),"label"===v?B:null,!1!==r.showHeader&&i(Te.Box,{style:u(u({},b),{},{fontSize:"12px",opacity:.8}),children:[m.map(function(e){return l(Te.Text,{children:e},"hdr-".concat(e))}),l("span",{})]}),i(Te.VStack,{style:{gap:"0.5rem"},children:[s.map(function(t,r){return i(Te.Box,{style:b,children:[m.map(function(n){var i;return l(Te.Input,{type:"text",placeholder:n,value:null!==(i=null==t?void 0:t[n])&&void 0!==i?i:"",onChange:function(e){return t=r,l=n,i=e.target.value,o=s.map(function(e,n){return n===t?u(u({},e),{},c({},l,i)):e}),void g(o);var t,l,i,o},className:we(A,"Input"),style:U.input},"".concat(e,"-").concat(r,"-").concat(n))}),l(Te.Button,{"aria-label":"Remove ".concat(n," row ").concat(r+1),onClick:function(){return function(e){var t=s.filter(function(t,n){return n!==e});g(t)}(r)},className:we(A,"Button","secondary"),style:{padding:"6px 10px"},children:"×"})]},"".concat(e,"-").concat(r))}),i(Te.Button,{onClick:function(){var e=m.reduce(function(e,t){return u(u({},e),{},c({},t,""))},{});g([].concat(f(s),[e]))},className:we(A,"Button","default"),style:{alignSelf:"flex-start",padding:"6px 10px"},children:["+ Add ",n]})]}),"input"===v?B:null]},e)},we=function(e,t,n){return g(e,t,n)},Ce=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=(null==q?void 0:q[e])||{};return{description:null!==(t=r.description)&&void 0!==t?t:l.description,placement:"input"===(null!==(n=r.descriptionPlacement)&&void 0!==n?n:l.descriptionPlacement)?"input":"label"}},Ne=n(function(){var e=v(arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie);if(e.success){pe(e.data);var t=b(e.data);se(t),fe(u({},t)),ge("")}else ge(e.error),pe(null),se({}),fe({})},[ie]);r(function(){R?(oe(R),Ne(R)):""===R&&(oe(""),se({}),fe({}),pe(null),ge(""))},[R,Ne]);var Le=function(e,t){var n=u(u({},ce),{},c({},e,t));if(se(n),D){var r=x(n);D(e,t,r)}},Ie=function(t,n){var r=h(n,t,q),a=T(t),s={key:t,value:n,displayName:a,fieldTypeConfig:r,formData:ce,onChange:function(e){return Le(t,e)},UI:Te,props:u({uiLibrary:A,onSave:j,onCancel:H,onFieldChange:D,saveButtonText:z,cancelButtonText:P,initialJson:R,customStyles:U,showControls:G,inlineLabels:_,columns:K,fieldConfig:q,sections:X,includeUnsectioned:ee,unsectionedTitle:ne},re)},d=null==B?void 0:B[t];if("function"==typeof d)return l(e.Fragment,{children:d(s)},t);var f=null==w?void 0:w[r.type];if("function"==typeof f)return l(e.Fragment,{children:f(s)},t);switch(r.type){case"checkbox":return Ae(t,n,a);case"select":return je(t,n,a,r);case"segment":return function(e,t,n,r){var a={key:e,value:t,displayName:n,fieldTypeConfig:r,formData:ce,onChange:function(t){return Le(e,t)},UI:Te,props:u({uiLibrary:A,customStyles:U,inlineLabels:_},re)},s="function"==typeof(null==I?void 0:I[e])&&I[e](a)||"function"==typeof(null==I?void 0:I.segment)&&I.segment(a)||l(Te.Label,{className:we(A,"Label"),style:u(u({},U.fieldLabel),{},{marginBottom:_?0:"0.5rem"}),children:n}),d="function"==typeof(null==N?void 0:N[e])&&N[e](a)||"function"==typeof(null==N?void 0:N.segment)&&N.segment(a)||l(Te.HStack,{className:we(A,"HStack"),style:u(c(c(c({},_?"flex":"width",_?1:"100%"),"gap","0.5rem"),"flexWrap","wrap"),U.hstack),children:(r.options||[]).map(function(n){var r,i=(null!==(r=ce[e])&&void 0!==r?r:t)===n;return l(Te.Button,{type:"button",onClick:function(){return Le(e,n)},className:we(A,"Button",i?"primary":"secondary"),style:{padding:"6px 10px",borderRadius:"8px",border:i?"1px solid var(--segment-selected-border, #6366f1)":"1px solid rgba(0,0,0,0.1)",background:i?"var(--segment-selected-bg, #eef2ff)":"var(--segment-bg, #fff)",color:i?"var(--segment-selected-fg, #3730a3)":"inherit",cursor:"pointer"},children:n},n)})}),f=Ce(e,r),p=f.description,m=f.placement,y=p?l(Te.Text,{className:we(A,"Text"),style:{fontSize:"12px",opacity:.8,marginTop:"0.25rem"},children:p}):null;return l(Te.Box,{className:we(A,"Box"),style:u({marginBottom:"1rem"},U.fieldContainer),children:_?i(Te.Box,{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[l(Te.Box,{style:{minWidth:"30%"},children:s}),i(Te.Box,{style:{display:"flex",flexDirection:"column",flex:1},children:[d,y]})]}):i(o,{children:[s,"label"===m?y:null,d,"input"===m?y:null]})},e)}(t,n,a,r);case"multi-select":return He(t,n,a,r);case"textarea":return De(t,n,a,r);case"email":case"url":case"date":case"password":return We(t,n,a,r);case"number":return ze(t,n,a);case"slider":return Oe(t,n,a,r);case"tags":return Pe(t,n,a,r);case"key-value-list":return Se(t,n,a,r);case"array":return Ve(t,n,a,r);case"object":return Fe(t,n,a);default:return Re(t,n,a)}},Oe=function(e,t,n,r){var o,a,c,s,d=null!==(o=r.min)&&void 0!==o?o:0,f=null!==(a=r.max)&&void 0!==a?a:100,p=null!==(c=r.step)&&void 0!==c?c:1,m="number"==typeof ce[e]?ce[e]:null!==(s=r.default)&&void 0!==s?s:d,y=Ce(e,r),g=y.description,b=y.placement,x=g?l(Te.Text,{className:we(A,"Text"),style:{fontSize:"12px",opacity:.8,marginTop:"0.25rem",marginBottom:"label"===b?"0.5rem":0},children:g}):null;return i(Te.Box,{className:we(A,"Box"),style:u({marginBottom:"1rem"},U.fieldContainer),children:[l(Te.Label,{className:we(A,"Label"),style:U.label,children:l(Te.Text,{className:we(A,"Text"),style:u({fontWeight:"500"},U.fieldLabel),children:n})}),"label"===b?x:null,i("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[l("input",{type:"range",min:d,max:f,step:p,value:m,onChange:function(t){return Le(e,Number(t.target.value))},className:we(A,"Input","range"),style:{width:"100%"}}),l(Te.Text,{className:we(A,"Text"),style:{minWidth:"3rem",textAlign:"right"},children:m})]}),"input"===b?x:null]},e)},Ae=function(e,t,n){var r={key:e,value:t,displayName:n,fieldTypeConfig:{type:"checkbox"},formData:ce,onChange:function(t){return Le(e,t)},UI:Te,props:u({uiLibrary:A,customStyles:U,inlineLabels:_},re)},o="function"==typeof(null==I?void 0:I[e])&&I[e](r)||"function"==typeof(null==I?void 0:I.checkbox)&&I.checkbox(r)||l(Te.Text,{className:we(A,"Text"),style:u({fontWeight:"500"},U.fieldLabel),children:n}),a="function"==typeof(null==N?void 0:N[e])&&N[e](r)||"function"==typeof(null==N?void 0:N.checkbox)&&N.checkbox(r)||l("input",{type:"checkbox",checked:ce[e]||!1,onChange:function(t){return Le(e,t.target.checked)},className:we(A,"Input","checkbox"),style:U.checkbox}),c=Ce(e,u({type:"checkbox"},null==q?void 0:q[e])),s=c.description,d=c.placement,f=s?l(Te.Text,{className:we(A,"Text"),style:{fontSize:"12px",opacity:.8,marginTop:"4px"},children:s}):null;return i(Te.Box,{className:we(A,"Box"),style:u({marginBottom:"1rem"},U.fieldContainer),children:["label"===d?f:null,i(Te.Label,{className:we(A,"Label"),style:u({display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},U.label),children:[a,o]}),"input"===d?f:null]},e)},je=function(e,t,n,r){var a,s={key:e,value:t,displayName:n,fieldTypeConfig:r,formData:ce,onChange:function(t){return Le(e,t)},UI:Te,props:u({uiLibrary:A,customStyles:U,inlineLabels:_},re)},d="function"==typeof(null==I?void 0:I[e])&&I[e](s)||"function"==typeof(null==I?void 0:I.select)&&I.select(s)||l(Te.Label,{className:we(A,"Label"),style:u(u({},U.fieldLabel),{},{marginBottom:_?0:"0.5rem"}),children:n}),f="function"==typeof(null==N?void 0:N[e])&&N[e](s)||"function"==typeof(null==N?void 0:N.select)&&N.select(s)||i(Te.Select,{value:ce[e]||"",onChange:function(t){return Le(e,t.target.value)},className:we(A,"Select"),style:u(c({},_?"flex":"width",_?1:"100%"),U.select),children:[i("option",{value:"",children:["Select ",n]}),null===(a=r.options)||void 0===a?void 0:a.map(function(e){return l("option",{value:e,children:e},e)})]}),p=Ce(e,r),m=p.description,y=p.placement,g=m?l(Te.Text,{className:we(A,"Text"),style:{fontSize:"12px",opacity:.8,marginTop:"0.25rem"},children:m}):null;return l(Te.Box,{className:we(A,"Box"),style:u({marginBottom:"1rem"},U.fieldContainer),children:_?i(Te.Box,{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[l(Te.Box,{style:{minWidth:"30%"},children:d}),i(Te.Box,{style:{display:"flex",flexDirection:"column",flex:1},children:[f,g]})]}):i(o,{children:[d,"label"===y?g:null,f,"input"===y?g:null]})},e)},He=function(e,t,n,r){var o,a=Array.isArray(ce[e])?ce[e]:[],c=Ce(e,r),s=c.description,d=c.placement,p=s?l(Te.Text,{className:we(A,"Text"),style:{fontSize:"12px",opacity:.8,marginTop:"0.25rem",marginBottom:"label"===d?"0.5rem":0},children:s}):null;return i(Te.Box,{className:we(A,"Box"),style:u({marginBottom:"1rem"},U.fieldContainer),children:[l(Te.Label,{className:we(A,"Label"),style:u({display:"block",fontWeight:"600",marginBottom:"0.5rem"},U.fieldLabel),children:n}),"label"===d?p:null,l(Te.Box,{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:null===(o=r.options)||void 0===o?void 0:o.map(function(t){return i(Te.Label,{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[l("input",{type:"checkbox",checked:a.includes(t),onChange:function(n){var r=n.target.checked?[].concat(f(a),[t]):a.filter(function(e){return e!==t});Le(e,r)},style:U.checkbox}),l(Te.Text,{style:u({fontSize:"14px"},U.text),children:t})]},t)})}),"input"===d?p:null]},e)},De=function(e,t,n,r){var a={key:e,value:t,displayName:n,fieldTypeConfig:r,formData:ce,onChange:function(t){return Le(e,t)},UI:Te,props:u({uiLibrary:A,customStyles:U,inlineLabels:_},re)},s="function"==typeof(null==I?void 0:I[e])&&I[e](a)||"function"==typeof(null==I?void 0:I.textarea)&&I.textarea(a)||l(Te.Label,{className:we(A,"Label"),style:u(u({},U.fieldLabel),{},{marginBottom:_?0:"0.5rem"}),children:n}),d="function"==typeof(null==N?void 0:N[e])&&N[e](a)||"function"==typeof(null==N?void 0:N.textarea)&&N.textarea(a)||l(Te.Textarea,{value:ce[e]||"",onChange:function(t){return Le(e,t.target.value)},className:we(A,"Textarea"),style:u(c(c({},_?"flex":"width",_?1:"100%"),"minHeight","".concat(1.5*(r.rows||4),"rem")),U.textarea)}),f=Ce(e,r),p=f.description,m=f.placement,y=p?l(Te.Text,{className:we(A,"Text"),style:{fontSize:"12px",opacity:.8,marginTop:"0.25rem"},children:p}):null;return l(Te.Box,{className:we(A,"Box"),style:u({marginBottom:"1rem"},U.fieldContainer),children:_?i(Te.Box,{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem"},children:[l(Te.Box,{style:{minWidth:"30%"},children:s}),i(Te.Box,{style:{display:"flex",flexDirection:"column",flex:1},children:[d,y]})]}):i(o,{children:[s,"label"===m?y:null,d,"input"===m?y:null]})},e)},We=function(e,t,n,r){var a={key:e,value:t,displayName:n,fieldTypeConfig:r,formData:ce,onChange:function(t){return Le(e,t)},UI:Te,props:u({uiLibrary:A,customStyles:U,inlineLabels:_},re)},s="function"==typeof(null==I?void 0:I[e])&&I[e](a)||"function"==typeof(null==I?void 0:I[r.type])&&I[r.type](a)||l(Te.Label,{className:we(A,"Label"),style:u(u({},U.fieldLabel),{},{marginBottom:_?0:"0.5rem"}),children:n}),d="function"==typeof(null==N?void 0:N[e])&&N[e](a)||"function"==typeof(null==N?void 0:N[r.type])&&N[r.type](a)||l(Te.Input,{type:r.type,value:ce[e]||"",onChange:function(t){return Le(e,t.target.value)},className:we(A,"Input"),style:u(c({},_?"flex":"width",_?1:"100%"),U.input)}),f=r.description?l(Te.Text,{className:we(A,"Text"),style:{fontSize:"12px",opacity:.8,marginTop:"0.25rem",marginBottom:_?0:"0.25rem"},children:r.description}):null;return l(Te.Box,{className:we(A,"Box"),style:u({marginBottom:"1rem"},U.fieldContainer),children:_?i(Te.Box,{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[l(Te.Box,{style:{minWidth:"30%"},children:s}),i(Te.Box,{style:{display:"flex",flexDirection:"column",flex:1},children:[d,f]})]}):i(o,{children:[s,f,d]})},e)},ze=function(e,t,n){var r={key:e,value:t,displayName:n,fieldTypeConfig:{type:"number"},formData:ce,onChange:function(t){return Le(e,t)},UI:Te,props:u({uiLibrary:A,customStyles:U,inlineLabels:_},re)},a="function"==typeof(null==I?void 0:I[e])&&I[e](r)||"function"==typeof(null==I?void 0:I.number)&&I.number(r)||l(Te.Label,{className:we(A,"Label"),style:u({display:"block",fontWeight:"600",marginBottom:_?0:"0.5rem"},U.fieldLabel),children:n}),s="function"==typeof(null==N?void 0:N[e])&&N[e](r)||"function"==typeof(null==N?void 0:N.number)&&N.number(r)||l(Te.Input,{type:"number",value:ce[e]||"",onChange:function(t){var n=parseFloat(t.target.value)||0;Le(e,n)},className:we(A,"Input"),style:u(c({},_?"flex":"width",_?1:"100%"),U.input)}),d=Ce(e,u({type:"number"},null==q?void 0:q[e])),f=d.description,p=d.placement,m=f?l(Te.Text,{className:we(A,"Text"),style:{fontSize:"12px",opacity:.8,marginTop:"0.25rem"},children:f}):null;return l(Te.Box,{className:we(A,"Box"),style:u({marginBottom:"1rem"},U.fieldContainer),children:_?i(Te.Box,{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[l(Te.Box,{style:{minWidth:"30%"},children:a}),i(Te.Box,{style:{display:"flex",flexDirection:"column",flex:1},children:[s,m]})]}):i(o,{children:[a,"label"===p?m:null,s,"input"===p?m:null]})},e)},Ve=function(e,t,n,r){if((Array.isArray(t)?t:[]).every(function(e){return"string"==typeof e})){var o=Array.isArray(ce[e])?ce[e]:[],a=xe[e]||"",s=function(t){var n=(t||"").trim();n&&(o.includes(n)||(Le(e,[].concat(f(o),[n])),he(function(t){return u(u({},t),{},c({},e,""))})))},d=function(t){Le(e,o.filter(function(e){return e!==t}))},p={display:"inline-flex",alignItems:"center",gap:"6px",padding:"4px 8px",borderRadius:"999px",background:"#eef2ff",color:"#3730a3",border:"1px solid #c7d2fe",fontSize:"12px"},m={cursor:"pointer",border:"none",background:"transparent",color:"#4338ca",fontSize:"14px",lineHeight:1},y=Ce(e,r),g=y.description,b=y.placement,x=g?l(Te.Text,{className:we(A,"Text"),style:{fontSize:"12px",opacity:.8,marginBottom:"0.5rem"},children:g}):null;return i(Te.Box,{className:we(A,"Box"),style:u({marginBottom:"1rem"},U.fieldContainer),children:[l(Te.Label,{className:we(A,"Label"),style:u({display:"block",fontWeight:"600",marginBottom:"0.5rem"},U.fieldLabel),children:n}),"label"===b?x:null,i(Te.Box,{style:{display:"flex",flexWrap:"wrap",gap:"8px",alignItems:"center"},children:[o.map(function(e){return i("span",{style:p,children:[e,l("button",{"aria-label":"Remove ".concat(e),onClick:function(){return d(e)},style:m,children:"×"})]},e)}),l(Te.Input,{type:"text",value:a,onChange:function(t){return he(function(n){return u(u({},n),{},c({},e,t.target.value))})},onKeyDown:function(e){"Enter"===e.key||","===e.key?(e.preventDefault(),s(a)):"Backspace"===e.key&&!a&&o.length&&d(o[o.length-1])},placeholder:r.placeholder||"Add ".concat(n," and press Enter"),className:we(A,"Input"),style:u({minWidth:"140px",flex:"0 1 auto"},U.input)}),l(Te.Button,{onClick:function(){return s(a)},className:we(A,"Button","secondary"),style:{padding:"6px 10px"},children:"Add"})]}),"input"===b?x:null]},e)}var h=Ce(e,r),v=h.description,B=h.placement,k=v?l(Te.Text,{className:we(A,"Text"),style:{fontSize:"12px",opacity:.8,marginBottom:"0.5rem"},children:v}):null;return i(Te.Box,{className:we(A,"Box"),style:u({marginBottom:"1rem"},U.fieldContainer),children:[i(Te.Label,{className:we(A,"Label"),style:u({display:"block",fontWeight:"600",marginBottom:"0.5rem"},U.fieldLabel),children:[n," (Array)"]}),"label"===B?k:null,l(Te.Textarea,{value:JSON.stringify(t,null,2),onChange:function(t){try{var n=JSON.parse(t.target.value);Le(e,n)}catch(n){Le(e,t.target.value)}},className:we(A,"Textarea"),style:u({fontFamily:"monospace",minHeight:"100px",width:"100%"},U.textarea)}),"input"===B?k:null]},e)},Pe=function(e,t,n,r){var o=Array.isArray(ce[e])?ce[e]:[],a=xe[e]||"",s=function(t){var n=(t||"").trim();n&&(o.includes(n)||(Le(e,[].concat(f(o),[n])),he(function(t){return u(u({},t),{},c({},e,""))})))},d=function(t){Le(e,o.filter(function(e){return e!==t}))},p={display:"inline-flex",alignItems:"center",gap:"6px",padding:"4px 8px",borderRadius:"999px",background:"#eef2ff",color:"#3730a3",border:"1px solid #c7d2fe",fontSize:"12px"},m={cursor:"pointer",border:"none",background:"transparent",color:"#4338ca",fontSize:"14px",lineHeight:1},y=Ce(e,r),g=y.description,b=y.placement,x=g?l(Te.Text,{className:we(A,"Text"),style:{fontSize:"12px",opacity:.8,marginBottom:"0.5rem"},children:g}):null;return i(Te.Box,{className:we(A,"Box"),style:u({marginBottom:"1rem"},U.fieldContainer),children:[l(Te.Label,{className:we(A,"Label"),style:u({display:"block",fontWeight:"600",marginBottom:"0.5rem"},U.fieldLabel),children:n}),"label"===b?x:null,i(Te.Box,{style:{display:"flex",flexWrap:"wrap",gap:"8px",alignItems:"center"},children:[o.map(function(e){return i("span",{style:p,children:[e,l("button",{"aria-label":"Remove ".concat(e),onClick:function(){return d(e)},style:m,children:"×"})]},e)}),l(Te.Input,{type:"text",value:a,onChange:function(t){return he(function(n){return u(u({},n),{},c({},e,t.target.value))})},onKeyDown:function(e){"Enter"===e.key||","===e.key?(e.preventDefault(),s(a)):"Backspace"===e.key&&!a&&o.length&&d(o[o.length-1])},placeholder:r.placeholder||"Add tag and press Enter",className:we(A,"Input"),style:u({minWidth:"140px",flex:"0 1 auto"},U.input)}),l(Te.Button,{onClick:function(){return s(a)},className:we(A,"Button","secondary"),style:{padding:"6px 10px"},children:"Add"})]}),"input"===b?x:null]},e)},Fe=function(e,t,n){var r=Ce(e,(null==q?void 0:q[e])||{type:"object"}),o=r.description,a=r.placement,c=o?l(Te.Text,{className:we(A,"Text"),style:{fontSize:"12px",opacity:.8,marginBottom:"0.5rem"},children:o}):null;return i(Te.Box,{className:we(A,"Box"),style:u({marginBottom:"1rem"},U.fieldContainer),children:[i(Te.Label,{className:we(A,"Label"),style:u({display:"block",fontWeight:"600",marginBottom:"0.5rem"},U.fieldLabel),children:[n," (Object)"]}),"label"===a?c:null,l(Te.Textarea,{value:JSON.stringify(t,null,2),onChange:function(t){try{var n=JSON.parse(t.target.value);Le(e,n)}catch(n){Le(e,t.target.value)}},className:we(A,"Textarea"),style:u({fontFamily:"monospace",minHeight:"100px",width:"100%"},U.textarea)}),"input"===a?c:null]},e)},Re=function(e,t,n){var r={key:e,value:t,displayName:n,fieldTypeConfig:{type:"text"},formData:ce,onChange:function(t){return Le(e,t)},UI:Te,props:u({uiLibrary:A,customStyles:U,inlineLabels:_},re)},a="function"==typeof(null==I?void 0:I[e])&&I[e](r)||"function"==typeof(null==I?void 0:I.text)&&I.text(r)||l(Te.Label,{className:we(A,"Label"),style:u({display:"block",fontWeight:"600",marginBottom:_?0:"0.5rem"},U.fieldLabel),children:n}),s="function"==typeof(null==N?void 0:N[e])&&N[e](r)||"function"==typeof(null==N?void 0:N.text)&&N.text(r)||l(Te.Input,{type:"text",value:ce[e]||"",onChange:function(t){return Le(e,t.target.value)},className:we(A,"Input"),style:u(c({},_?"flex":"width",_?1:"100%"),U.input)}),d=Ce(e,u({type:"text"},null==q?void 0:q[e])),f=d.description,p=d.placement,m=f?l(Te.Text,{className:we(A,"Text"),style:{fontSize:"12px",opacity:.8,marginTop:"0.25rem"},children:f}):null;return l(Te.Box,{className:we(A,"Box"),style:u({marginBottom:"1rem"},U.fieldContainer),children:_?i(Te.Box,{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[l(Te.Box,{style:{minWidth:"30%"},children:a}),i(Te.Box,{style:{display:"flex",flexDirection:"column",flex:1},children:[s,m]})]}):i(o,{children:[a,"label"===p?m:null,s,"input"===p?m:null]})},e)};return l(Te.Container,u(u({className:we(A,"Container"),style:U.container},re),{},{children:i(Te.VStack,{className:we(A,"VStack"),style:u({gap:"1rem"},U.stack),children:[ye&&l(Te.Alert,{className:we(A,"Alert","error"),style:U.alert,children:l(Te.Text,{style:U.errorText,children:ye})}),Object.keys(ce).length>0&&l(Te.Card,{className:we(A,"Card"),style:u({width:"100%",padding:"1rem"},U.formCard),children:function(){if(Array.isArray(X)&&X.length){var e=Object.keys(ce),t=new Set,n=X.map(function(n,r){var o=n.id||"section-".concat(r),a=Array.isArray(n.fields)?n.fields:[];a.forEach(function(e){return t.add(e)});var c=a.filter(function(t){return e.includes(t)}),s=function(){if(K<=1)return l(Te.VStack,{style:{gap:"1rem"},children:c.map(function(e){return Ie(e,ce[e])})},o);for(var e=Math.ceil(c.length/K),t=[],n=0;n<K;n++){var r=n*e,i=Math.min(r+e,c.length);t.push(c.slice(r,i))}var a=u({display:"grid",gridTemplateColumns:"repeat(".concat(K,", 1fr)"),gap:"2rem",width:"100%"},U.formGrid);return l(Te.Box,{className:we(A,"Box"),style:a,children:t.map(function(e,t){return l(Te.VStack,{className:we(A,"VStack"),style:u({gap:"1rem"},U.formColumn),children:e.map(function(e){return Ie(e,ce[e])})},t)})},o)}(),d=!(!n.defaultOpen&&n.collapsible),f=Be.has(o)?!d:d;return i(Te.Box,{style:{marginBottom:"1.25rem"},children:[i(Te.Box,{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.5rem"},children:[i(Te.Box,{style:{display:"flex",alignItems:"center",gap:"8px"},children:[n.collapsible&&l("button",{"aria-label":"Toggle ".concat(n.title),onClick:function(){return ke(function(e){var t=new Set(e);return t.has(o)?t.delete(o):t.add(o),t})},style:{border:"none",background:"transparent",cursor:"pointer"},children:l("span",{children:f?"▼":"▶"})}),l(Te.Heading,{className:we(A,"Heading"),style:{margin:0},children:n.title})]}),n.description&&l(Te.Text,{className:we(A,"Text"),style:{opacity:.8},children:n.description})]}),(!n.collapsible||f)&&s]},"wrap-".concat(o))}),r=null;if(ee){var o=e.filter(function(e){return!t.has(e)});if(o.length){var a="unsectioned",c=!0,s=!Be.has(a)&&c;r=i(Te.Box,{style:{marginBottom:"1.25rem"},children:[l(Te.Box,{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.5rem"},children:i(Te.Box,{style:{display:"flex",alignItems:"center",gap:"8px"},children:[l("button",{"aria-label":"Toggle ".concat(ne),onClick:function(){return ke(function(e){var t=new Set(e);return t.has(a)?t.delete(a):t.add(a),t})},style:{border:"none",background:"transparent",cursor:"pointer"},children:l("span",{children:s?"▼":"▶"})}),l(Te.Heading,{className:we(A,"Heading"),style:{margin:0},children:ne})]})}),s&&function(){if(K<=1)return l(Te.VStack,{style:{gap:"1rem"},children:o.map(function(e){return Ie(e,ce[e])})});for(var e=Math.ceil(o.length/K),t=[],n=0;n<K;n++){var r=n*e,i=Math.min(r+e,o.length);t.push(o.slice(r,i))}var a=u({display:"grid",gridTemplateColumns:"repeat(".concat(K,", 1fr)"),gap:"2rem",width:"100%"},U.formGrid);return l(Te.Box,{className:we(A,"Box"),style:a,children:t.map(function(e,t){return l(Te.VStack,{className:we(A,"VStack"),style:u({gap:"1rem"},U.formColumn),children:e.map(function(e){return Ie(e,ce[e])})},t)})})}()]},"wrap-".concat(a))}}return i(Te.VStack,{className:we(A,"VStack"),style:u({gap:"1rem"},U.formStack),children:[n,r]})}var f=Object.entries(ce);if(K<=1)return l(Te.VStack,{className:we(A,"VStack"),style:u({gap:"1rem"},U.formStack),children:f.map(function(e){var t=d(e,2),n=t[0],r=t[1];return Ie(n,r)})});for(var p=Math.ceil(f.length/K),m=[],y=0;y<K;y++){var g=y*p,b=Math.min(g+p,f.length);m.push(f.slice(g,b))}var x=u({display:"grid",gridTemplateColumns:"repeat(".concat(K,", 1fr)"),gap:"2rem",width:"100%"},U.formGrid);return l(Te.Box,{className:we(A,"Box"),style:x,children:m.map(function(e,t){return l(Te.VStack,{className:we(A,"VStack"),style:u({gap:"1rem"},U.formColumn),children:e.map(function(e){var t=d(e,2),n=t[0],r=t[1];return Ie(n,r)})},t)})})}()}),G&&Object.keys(ce).length>0&&i(Te.HStack,{className:we(A,"HStack"),style:u({gap:"0.5rem",marginTop:"1rem"},U.controlButtons),children:[l(Te.Button,{onClick:function(){if(j){var e=x(ce);j(e,ce)}},className:we(A,"Button","default"),style:U.saveButton,children:z}),l(Te.Button,{onClick:function(){se(u({},de)),H&&H()},className:we(A,"Button","secondary"),style:U.cancelButton,children:P})]})]})}))};export{w as Fields,w as JsonFields,b as flattenObject,B as formatJson,T as getDisplayName,h as getInputType,k as getNestedLevel,g as getUIClasses,y as getUIComponents,v as parseJsonSafely,x as unflattenObject};
//# sourceMappingURL=index.esm.js.map
